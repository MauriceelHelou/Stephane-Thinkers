# ===========================================
# Backend Environment Variables
# ===========================================

# Database Configuration
# ---------------------
# For SQLite (Development):
DATABASE_URL=sqlite:///./intellectual_graph.db

# For PostgreSQL (Production/Railway):
# DATABASE_URL=postgresql://username:password@localhost:5432/intellectual_graph
# Note: Railway provides DATABASE_URL automatically when you add PostgreSQL

# Server Configuration
# --------------------
PORT=8010
ENVIRONMENT=development  # Use "production" for Railway deployment

# Authentication
# --------------
# Enforce bearer auth on API routes.
AUTH_REQUIRED=true
# Test-only bypass for automated test suites.
AUTH_BYPASS_FOR_TESTS=false
# Required when AUTH_REQUIRED=true.
SITE_PASSWORD=change-this-password
# Optional dedicated secret for signing auth tokens (recommended).
AUTH_TOKEN_SECRET=change-this-token-secret
# Token lifetime in seconds (default 8h).
AUTH_TOKEN_TTL_SECONDS=28800

# Frontend URL (for CORS)
# -----------------------
# Development:
FRONTEND_URL=http://localhost:3010
# Railway: Set to your Railway frontend URL, e.g.:
# FRONTEND_URL=https://your-frontend.up.railway.app

# AI/LLM Configuration (Optional)
# --------------------------------
# DeepSeek API (OpenAI-compatible)
DEEPSEEK_API_KEY=sk-your-deepseek-key
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat

# OpenAI API (for embeddings)
OPENAI_API_KEY=sk-your-openai-key
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ChromaDB Configuration
# ----------------------
CHROMA_PERSIST_DIRECTORY=./data/chroma
CHROMA_COLLECTION_NAME=thinkers
CHROMA_DISTANCE_FUNCTION=cosine
NOTES_AI_USE_EXTERNAL_EMBEDDINGS=true

# Plan 9 Notes AI Feature Flags
# -----------------------------
FEATURE_NOTES_AI_PHASE_A=true
FEATURE_NOTES_AI_PHASE_B=true
FEATURE_NOTES_AI_PHASE_C=true
FEATURE_NOTES_AI_PHASE_D=true
FEATURE_NOTES_AI_PHASE_E=true
FEATURE_NOTES_AI_PHASE_F=true
NOTES_AI_USE_LLM_PLANNING=true

# Redis + RQ (Phase F async jobs)
REDIS_URL=redis://localhost:6379/0
RQ_QUEUE_NAME=notes_ai
RQ_ENABLED=false

# AI Cost Controls
# ----------------
AI_COST_CONTROLS_ENABLED=true
AI_MAX_PROMPT_TOKENS=12000
AI_MAX_COMPLETION_TOKENS=1500
AI_DAILY_SOFT_QUOTA_TOKENS=250000
AI_RESPONSE_CACHE_TTL_SECONDS=3600

# ===========================================
# Railway Deployment Notes
# ===========================================
# 1. DATABASE_URL is auto-provided by Railway when you add PostgreSQL
#    Use ${{Postgres.DATABASE_URL}} in Railway variables
#
# 2. FRONTEND_URL must match your Railway frontend domain exactly
#    Include https:// and no trailing slash
#
# 3. Set ENVIRONMENT=production on Railway
#
# 4. Store API keys in Railway's encrypted environment variables
